'use client';import {useEffect,useState} from 'react';export default function AdminCustomers(){const [list,setList]=useState<any[]>([]);const [form,setForm]=useState({id:'',name:'',vat_number:'',city:'',price_tier:'C'});async function load(){const r=await fetch('/api/customers');setList(await r.json());}useEffect(()=>{load();},[]);function exists(id:string){return !!list.find(x=>x.id===id);}async function submit(e:any){e.preventDefault();const method=exists(form.id)?'PUT':'POST';const res=await fetch('/api/customers',{method,headers:{'Content-Type':'application/json'},body:JSON.stringify(form)});if(!res.ok){alert('Σφάλμα');return;}setForm({id:'',name:'',vat_number:'',city:'',price_tier:'C'});await load();}function edit(c:any){setForm({id:c.id,name:c.name,vat_number:c.vat_number,city:c.city,price_tier:c.price_tier});}return(<div className='container py-8 space-y-6'><a className='btn' href='/'>← Επιστροφή</a><h1 className='text-2xl font-semibold'>Admin — Πελάτες</h1><form onSubmit={submit} className='card'><div className='card-bd grid grid-cols-1 md:grid-cols-5 gap-3'><input className='input' placeholder='id' value={form.id} onChange={e=>setForm({...form,id:e.target.value})} required/><input className='input md:col-span-2' placeholder='Όνομα' value={form.name} onChange={e=>setForm({...form,name:e.target.value})} required/><input className='input' placeholder='ΑΦΜ' value={form.vat_number} onChange={e=>setForm({...form,vat_number:e.target.value})}/><input className='input' placeholder='Πόλη' value={form.city} onChange={e=>setForm({...form,city:e.target.value})}/><select className='input' value={form.price_tier} onChange={e=>setForm({...form,price_tier:e.target.value as any})}><option>A</option><option>B</option><option>C</option></select><button className='btn btn-primary' type='submit'>{exists(form.id)?'Αποθήκευση':'Δημιουργία'}</button></div></form><div className='card'><div className='card-bd overflow-x-auto'><table className='table'><thead><tr><th>ID</th><th>Όνομα</th><th>ΑΦΜ</th><th>Πόλη</th><th>Tier</th><th></th></tr></thead><tbody>{list.map((c:any)=>(<tr key={c.id}><td className='font-mono text-xs'>{c.id}</td><td>{c.name}</td><td>{c.vat_number}</td><td>{c.city}</td><td>{c.price_tier}</td><td><button className='btn' onClick={()=>edit(c)}>Επεξεργασία</button></td></tr>))}</tbody></table></div></div></div>);}
